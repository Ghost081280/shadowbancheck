<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agency Dashboard | ShadowBanCheck.io</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¢</text></svg>">
    
    <!-- Unified Dashboard Styles -->
    <link rel="stylesheet" href="css/dashboard-shared.css">
    <link rel="stylesheet" href="css/shadow-ai.css">
</head>
<body class="dashboard-page">
    <!-- Auth Check -->
    <script>
        (function() {
            const session = localStorage.getItem('shadowban_session') || sessionStorage.getItem('shadowban_session');
            if (!session) {
                window.location.href = 'login.html';
                return;
            }
            try {
                const data = JSON.parse(session);
                if (!data.loggedIn) {
                    window.location.href = 'login.html';
                    return;
                }
                // Only agency and admin can access
                if (data.role !== 'agency' && !data.isAgency && data.role !== 'admin' && !data.isAdmin) {
                    window.location.href = 'pro.html';
                    return;
                }
            } catch (e) {
                localStorage.removeItem('shadowban_session');
                sessionStorage.removeItem('shadowban_session');
                window.location.href = 'login.html';
            }
        })();
    </script>

    <div class="agency-layout">
        <!-- SIDEBAR -->
        <aside class="agency-sidebar">
            <div class="sidebar-logo">
                <span class="logo-icon">ğŸ¢</span>
                <span class="logo-text">Agency Portal</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span>Dashboard</span>
                </a>
                <a href="#clients" class="nav-item" data-section="clients">
                    <span class="nav-icon">ğŸ‘¥</span>
                    <span>Clients</span>
                    <span class="nav-badge" id="nav-client-count">3</span>
                </a>
                <a href="#resolution" class="nav-item" data-section="resolution">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span>Resolution Center</span>
                    <span class="nav-badge warning" id="nav-disputes">2</span>
                </a>
                
                <div class="nav-section-title">Tools</div>
                <a href="#bulk-check" class="nav-item" data-section="bulk-check">
                    <span class="nav-icon">âš¡</span>
                    <span>Bulk Check</span>
                </a>
                <a href="#reports" class="nav-item" data-section="reports">
                    <span class="nav-icon">ğŸ“„</span>
                    <span>Reports</span>
                </a>
                
                <div class="nav-section-title">Account</div>
                <a href="#team" class="nav-item" data-section="team">
                    <span class="nav-icon">ğŸ‘¤</span>
                    <span>Team</span>
                </a>
                <a href="#billing" class="nav-item" data-section="billing">
                    <span class="nav-icon">ğŸ’³</span>
                    <span>Billing</span>
                </a>
                <a href="#settings" class="nav-item" data-section="settings">
                    <span class="nav-icon">âš™ï¸</span>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <a href="index.html" class="sidebar-link">
                    <span>ğŸ </span> <span>Back to Site</span>
                </a>
                <button class="sidebar-link logout-btn" id="agency-logout-btn">
                    <span>ğŸšª</span> <span>Logout</span>
                </button>
            </div>
        </aside>
        
        <!-- MAIN CONTENT -->
        <main class="agency-main">
            <!-- Mobile Header -->
            <header class="mobile-header">
                <button class="menu-toggle" id="menu-toggle">â˜°</button>
                <span>Agency Dashboard</span>
                <button class="notif-btn">ğŸ””</button>
            </header>
            
            <!-- DASHBOARD SECTION -->
            <section class="agency-section active" id="section-dashboard">
                <div class="agency-header">
                    <div>
                        <h1>ğŸ“Š Agency Dashboard</h1>
                        <span class="header-subtitle">Welcome back! Here's your overview.</span>
                    </div>
                    <button class="primary-btn" onclick="switchSection('clients')">
                        â• Add Client
                    </button>
                </div>
                
                <!-- Usage Tracker -->
                <div class="usage-tracker">
                    <div class="usage-header">
                        <h3>ğŸ“Š This Month's Usage</h3>
                        <span class="badge info">Usage-Based Billing</span>
                    </div>
                    <div class="usage-bars">
                        <div class="usage-item">
                            <div class="usage-item-header">
                                <span class="usage-item-label">Engine Scans</span>
                                <span class="usage-item-value" id="usage-scans">247 scans</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-bar-fill" style="width: 60%"></div>
                            </div>
                        </div>
                        <div class="usage-item">
                            <div class="usage-item-header">
                                <span class="usage-item-label">AI Questions</span>
                                <span class="usage-item-value" id="usage-ai">89 questions</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-bar-fill" style="width: 35%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="usage-estimate">
                        Estimated bill: <strong>$16.13</strong> (247 Ã— $0.05 + 89 Ã— $0.02) â€¢ Resets in 8 days
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="stat-clients">3</h3>
                        <p>Active Clients</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="stat-accounts">8</h3>
                        <p>Total Accounts</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="stat-healthy">5</h3>
                        <p>Healthy</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="stat-issues">3</h3>
                        <p>Need Attention</p>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <button class="quick-btn" onclick="switchSection('bulk-check')">
                        <span>âš¡</span> Run Bulk Check
                    </button>
                    <button class="quick-btn" onclick="switchSection('resolution')">
                        <span>ğŸ“‹</span> Resolution Center
                    </button>
                    <button class="quick-btn" onclick="window.ShadowAI && window.ShadowAI.open()">
                        <span>ğŸ¤–</span> Ask Shadow AI
                    </button>
                    <button class="quick-btn" onclick="switchSection('reports')">
                        <span>ğŸ“„</span> Generate Report
                    </button>
                </div>
                
                <div class="two-column">
                    <div class="card">
                        <div class="card-header">
                            <h2>âš ï¸ Accounts Needing Attention</h2>
                            <button class="link-btn" onclick="switchSection('clients')">View All â†’</button>
                        </div>
                        <div class="card-body">
                            <div class="client-list-item">
                                <div class="client-avatar">ğŸ•</div>
                                <div class="client-info">
                                    <div class="client-name">Local Restaurant - Instagram</div>
                                    <div class="client-meta">@localfood â€¢ Score: 85%</div>
                                </div>
                                <span class="badge danger">Banned</span>
                            </div>
                            <div class="client-list-item">
                                <div class="client-avatar">ğŸš€</div>
                                <div class="client-info">
                                    <div class="client-name">Tech Startup - Twitter/X</div>
                                    <div class="client-meta">@techstartup â€¢ Score: 67%</div>
                                </div>
                                <span class="badge warning">Issues</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ“‹ Active Disputes</h2>
                            <button class="link-btn" onclick="switchSection('resolution')">View All â†’</button>
                        </div>
                        <div class="card-body">
                            <div class="client-list-item">
                                <div class="client-avatar" style="background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);">ğŸ“§</div>
                                <div class="client-info">
                                    <div class="client-name">Local Restaurant - Instagram Appeal</div>
                                    <div class="client-meta">Submitted 2 days ago</div>
                                </div>
                                <span class="badge info">Pending</span>
                            </div>
                            <div class="client-list-item">
                                <div class="client-avatar" style="background: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);">ğŸ“§</div>
                                <div class="client-info">
                                    <div class="client-name">Tech Startup - Twitter Appeal</div>
                                    <div class="client-meta">Draft - Ready to send</div>
                                </div>
                                <span class="badge warning">Draft</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- CLIENTS SECTION -->
            <section class="agency-section" id="section-clients">
                <div class="agency-header">
                    <div>
                        <h1>ğŸ‘¥ Clients</h1>
                        <span class="header-subtitle">Manage your client accounts</span>
                    </div>
                    <button class="primary-btn" id="add-client-btn">â• Add Client</button>
                </div>
                
                <div class="clients-grid">
                    <!-- ACME Corporation -->
                    <div class="client-card">
                        <div class="client-card-header">
                            <h3>ğŸ­ ACME Corporation</h3>
                            <span class="client-status warning">âš ï¸ 1 Warning</span>
                        </div>
                        <div class="client-card-body">
                            <div class="client-accounts">
                                <div class="client-account-chip">
                                    <span class="status-dot healthy"></span>
                                    <span>ğ• @acmecorp</span>
                                </div>
                                <div class="client-account-chip">
                                    <span class="status-dot warning"></span>
                                    <span>ğŸ“· @acme.corp</span>
                                </div>
                                <div class="client-account-chip">
                                    <span class="status-dot healthy"></span>
                                    <span>in LinkedIn</span>
                                </div>
                            </div>
                            <p style="font-size: 0.8125rem; color: var(--text-muted);">Contact: marketing@acmecorp.com</p>
                        </div>
                        <div class="client-card-footer">
                            <button class="secondary-btn btn-sm">ğŸ” Check All</button>
                            <button class="secondary-btn btn-sm">ğŸ‘ï¸ Details</button>
                            <button class="secondary-btn btn-sm">ğŸ“‹ Dispute</button>
                        </div>
                    </div>
                    
                    <!-- Tech Startup -->
                    <div class="client-card">
                        <div class="client-card-header">
                            <h3>ğŸš€ Tech Startup Inc</h3>
                            <span class="client-status issues">ğŸ”¶ Issues</span>
                        </div>
                        <div class="client-card-body">
                            <div class="client-accounts">
                                <div class="client-account-chip">
                                    <span class="status-dot issues"></span>
                                    <span>ğ• @techstartup</span>
                                </div>
                                <div class="client-account-chip">
                                    <span class="status-dot healthy"></span>
                                    <span>â™ª @techstartup</span>
                                </div>
                            </div>
                            <p style="font-size: 0.8125rem; color: var(--text-muted);">Contact: social@techstartup.io</p>
                        </div>
                        <div class="client-card-footer">
                            <button class="secondary-btn btn-sm">ğŸ” Check All</button>
                            <button class="secondary-btn btn-sm">ğŸ‘ï¸ Details</button>
                            <button class="secondary-btn btn-sm">ğŸ“‹ Dispute</button>
                        </div>
                    </div>
                    
                    <!-- Local Restaurant -->
                    <div class="client-card">
                        <div class="client-card-header">
                            <h3>ğŸ• Local Restaurant</h3>
                            <span class="client-status issues">ğŸš« Banned</span>
                        </div>
                        <div class="client-card-body">
                            <div class="client-accounts">
                                <div class="client-account-chip">
                                    <span class="status-dot issues"></span>
                                    <span>ğŸ“· @localfood</span>
                                </div>
                                <div class="client-account-chip">
                                    <span class="status-dot warning"></span>
                                    <span>â“• localrestaurant</span>
                                </div>
                            </div>
                            <p style="font-size: 0.8125rem; color: var(--text-muted);">Contact: owner@localrestaurant.com</p>
                        </div>
                        <div class="client-card-footer">
                            <button class="secondary-btn btn-sm">ğŸ” Check All</button>
                            <button class="secondary-btn btn-sm">ğŸ‘ï¸ Details</button>
                            <button class="primary-btn btn-sm">ğŸ“‹ Dispute Now</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- RESOLUTION CENTER -->
            <section class="agency-section" id="section-resolution">
                <div class="agency-header">
                    <div>
                        <h1>ğŸ“‹ Resolution Center</h1>
                        <span class="header-subtitle">Manage shadow ban disputes for your clients</span>
                    </div>
                    <button class="primary-btn">â• New Dispute</button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>5</h3>
                        <p>Total Disputes</p>
                    </div>
                    <div class="stat-card">
                        <h3>2</h3>
                        <p>Pending Response</p>
                    </div>
                    <div class="stat-card">
                        <h3>2</h3>
                        <p>Resolved</p>
                    </div>
                    <div class="stat-card">
                        <h3>67%</h3>
                        <p>Success Rate</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“§ Active Disputes</h2>
                    </div>
                    <div class="card-body">
                        <div class="client-list-item">
                            <div class="client-avatar" style="background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);">ğŸ“·</div>
                            <div class="client-info">
                                <div class="client-name">Local Restaurant - Instagram Shadow Ban Appeal</div>
                                <div class="client-meta">@localfood â€¢ Score: 85% â€¢ Submitted Nov 25, 2025</div>
                            </div>
                            <span class="badge info">Awaiting Response</span>
                        </div>
                        <div class="client-list-item">
                            <div class="client-avatar" style="background: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);">ğ•</div>
                            <div class="client-info">
                                <div class="client-name">Tech Startup - Twitter Reply Deboosting</div>
                                <div class="client-meta">@techstartup â€¢ Score: 67% â€¢ Draft</div>
                            </div>
                            <span class="badge warning">Draft</span>
                        </div>
                        <div class="client-list-item">
                            <div class="client-avatar" style="background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);">ğŸ“·</div>
                            <div class="client-info">
                                <div class="client-name">ACME Corp - Instagram Hashtag Restriction</div>
                                <div class="client-meta">@acme.corp â€¢ Resolved Nov 20, 2025</div>
                            </div>
                            <span class="badge success">Resolved âœ“</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- BULK CHECK -->
            <section class="agency-section" id="section-bulk-check">
                <div class="agency-header">
                    <div>
                        <h1>âš¡ Bulk Check</h1>
                        <span class="header-subtitle">Check all client accounts at once</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ” Run Bulk Scan</h2>
                        <span class="badge info">$0.05 per scan</span>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">
                            This will check all <strong>8 accounts</strong> across <strong>3 clients</strong>.
                            Estimated cost: <strong>$0.40</strong>
                        </p>
                        <button class="primary-btn btn-lg full-width">âš¡ Run Bulk Check (8 accounts â€¢ ~$0.40)</button>
                    </div>
                </div>
            </section>
            
            <!-- REPORTS -->
            <section class="agency-section" id="section-reports">
                <div class="agency-header">
                    <div>
                        <h1>ğŸ“„ Reports</h1>
                        <span class="header-subtitle">Generate client reports</span>
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ“Š Client Status Report</h2>
                        </div>
                        <div class="card-body">
                            <p style="margin-bottom: 1rem; color: var(--text-muted);">Generate a comprehensive status report for a client.</p>
                            <div class="config-field">
                                <label>Select Client</label>
                                <select class="input">
                                    <option value="">All Clients</option>
                                    <option value="acme-corp">ACME Corporation</option>
                                    <option value="tech-startup">Tech Startup Inc</option>
                                    <option value="local-restaurant">Local Restaurant</option>
                                </select>
                            </div>
                            <div class="config-field">
                                <label>Date Range</label>
                                <select class="input">
                                    <option value="7">Last 7 days</option>
                                    <option value="30" selected>Last 30 days</option>
                                    <option value="90">Last 90 days</option>
                                </select>
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="primary-btn" style="flex: 1;">ğŸ“„ Generate PDF</button>
                                <button class="secondary-btn" style="flex: 1;">ğŸ“Š Export CSV</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ“… Scheduled Reports</h2>
                        </div>
                        <div class="card-body">
                            <p style="margin-bottom: 1rem; color: var(--text-muted);">Auto-send reports to clients on a schedule.</p>
                            <div class="config-field">
                                <label>Frequency</label>
                                <select class="input">
                                    <option value="weekly" selected>Weekly (Monday)</option>
                                    <option value="biweekly">Bi-weekly</option>
                                    <option value="monthly">Monthly (1st)</option>
                                </select>
                            </div>
                            <button class="secondary-btn full-width">Save Schedule</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- TEAM -->
            <section class="agency-section" id="section-team">
                <div class="agency-header">
                    <div>
                        <h1>ğŸ‘¤ Team</h1>
                        <span class="header-subtitle">Manage team members</span>
                    </div>
                    <button class="primary-btn">â• Invite Member</button>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ‘¥ Team Members</h2>
                        <span class="badge info">3 of 5 seats used</span>
                    </div>
                    <div class="card-body">
                        <div class="client-list-item">
                            <div class="client-avatar">ğŸ‘¤</div>
                            <div class="client-info">
                                <div class="client-name">You (Owner)</div>
                                <div class="client-meta">agency@test.com</div>
                            </div>
                            <span class="badge success">Owner</span>
                        </div>
                        <div class="client-list-item">
                            <div class="client-avatar">ğŸ‘¤</div>
                            <div class="client-info">
                                <div class="client-name">Sarah Marketing</div>
                                <div class="client-meta">sarah@agency.com</div>
                            </div>
                            <span class="badge info">Admin</span>
                        </div>
                        <div class="client-list-item">
                            <div class="client-avatar">ğŸ‘¤</div>
                            <div class="client-info">
                                <div class="client-name">Mike Intern</div>
                                <div class="client-meta">mike@agency.com</div>
                            </div>
                            <span class="badge">Member</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- BILLING -->
            <section class="agency-section" id="section-billing">
                <div class="agency-header">
                    <div>
                        <h1>ğŸ’³ Billing</h1>
                        <span class="header-subtitle">Usage-based billing</span>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>$29</h3>
                        <p>Base (+ $5/client)</p>
                    </div>
                    <div class="stat-card">
                        <h3>$15</h3>
                        <p>3 Clients Ã— $5</p>
                    </div>
                    <div class="stat-card">
                        <h3>$16.13</h3>
                        <p>Usage This Month</p>
                    </div>
                    <div class="stat-card">
                        <h3>$60.13</h3>
                        <p>Estimated Total</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“Š Usage Breakdown</h2>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                            <span>Engine Scans (247 Ã— $0.05)</span>
                            <strong>$12.35</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                            <span>AI Questions (89 Ã— $0.02)</span>
                            <strong>$1.78</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
                            <span>Dispute Submissions (2 Ã— $1.00)</span>
                            <strong>$2.00</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 1rem 0; font-size: 1.125rem;">
                            <strong>Total Usage</strong>
                            <strong style="color: var(--agency-primary-light);">$16.13</strong>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- SETTINGS -->
            <section class="agency-section" id="section-settings">
                <div class="agency-header">
                    <div>
                        <h1>âš™ï¸ Settings</h1>
                        <span class="header-subtitle">Agency configuration</span>
                    </div>
                </div>
                
                <div class="two-column">
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ¢ Agency Profile</h2>
                        </div>
                        <div class="card-body">
                            <div class="config-field">
                                <label>Agency Name</label>
                                <input type="text" class="input" value="Demo Marketing Co">
                            </div>
                            <div class="config-field">
                                <label>Contact Email</label>
                                <input type="email" class="input" value="agency@test.com">
                            </div>
                            <div class="config-field">
                                <label>Website</label>
                                <input type="url" class="input" placeholder="https://youragency.com">
                            </div>
                            <button class="primary-btn">Save Changes</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ¨ White Label</h2>
                            <span class="badge warning">Coming Soon</span>
                        </div>
                        <div class="card-body">
                            <p style="color: var(--text-muted); margin-bottom: 1rem;">Customize reports and dispute letters with your agency branding.</p>
                            <div class="config-field">
                                <label>Logo URL</label>
                                <input type="url" class="input" placeholder="https://..." disabled>
                            </div>
                            <div class="config-field">
                                <label>Brand Color</label>
                                <input type="color" class="input" value="#10b981" disabled style="height: 40px;">
                            </div>
                            <button class="secondary-btn" disabled>Save Branding</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- FOOTER -->
            <footer class="agency-footer">
                <span>Â© 2025 ShadowBanCheck.io</span>
                <a href="index.html">Home</a>
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="mailto:support@shadowbancheck.io">Support</a>
            </footer>
        </main>
    </div>
    
    <!-- Toast -->
    <div class="toast hidden" id="toast">
        <span id="toast-icon">âœ…</span>
        <span id="toast-message">Success</span>
    </div>
    
    <!-- Scripts -->
    <script src="js/dashboard-shared.js"></script>
    <script src="js/shadow-ai.js"></script>
</body>
</html>
